const translations = {
    sv: {
        'app-title': 'Timer & Klocka',
        'timer': 'Timer',
        'clock': 'Klocka',
        'timer-settings': 'Timer-inställningar',
        'tab-basic': 'Grundläggande',
        'tab-clock': 'Klockvisning',
        'tab-speed': 'Tidsmanipulation',
        'tab-appearance': 'Utseende',
        'tab-exercise': 'Övningsdetaljer',
        'tab-presets': 'Förinställningar',
        'clock-settings': 'Klockinställningar',
        'direction': 'Riktning:',
        'countdown': 'Nedräkning',
        'countup': 'Uppräkning',
        'hours': 'Timmar',
        'minutes': 'Minuter',
        'seconds': 'Sekunder',
        'clock-type': 'Typ:',
        'real-time': 'Verklig tid',
        'custom-time': 'Anpassad tid',
        'format': 'Format:',
        'show-date': 'Visa datum',
        'show-weekday': 'Visa veckodag',
        'speed-settings': 'Hastighetsinställningar',
        'speed-05': 'Halv hastighet',
        'speed-1': 'Normal',
        'speed-2': 'Dubbel hastighet',
        'speed-5': '5 ggr snabbare',
        'speed-10': '10 ggr snabbare',
        'speed-60': 'En minut per sekund',
        'speed-affects-timer': 'Hastighet påverkar timer',
        'visual-theme': 'Visuellt tema',
        'theme-digital': 'Digital Standard',
        'theme-analog': 'Analog Station',
        'theme-retro': '7-segment',
        'theme-tactical': 'Taktisk',
        'theme-nixie': 'Nixie-rör',
        'theme-lcd': 'LCD',
        'presets': 'Förinställningar',
        'save-preset': 'Spara nuvarande',
        'load-preset': 'Ladda vald',
        'start-fullscreen': 'Starta i fullskärm',
        'shortcuts': 'Kortkommandon:',
        'pause-resume': 'Pausa/Återuppta',
        'restart': 'Starta om',
        'exit-fullscreen': 'Avsluta fullskärm',
        'monday': 'Måndag',
        'tuesday': 'Tisdag',
        'wednesday': 'Onsdag',
        'thursday': 'Torsdag',
        'friday': 'Fredag',
        'saturday': 'Lördag',
        'sunday': 'Söndag',
        'january': 'Januari',
        'february': 'Februari',
        'march': 'Mars',
        'april': 'April',
        'may': 'Maj',
        'june': 'Juni',
        'july': 'Juli',
        'august': 'Augusti',
        'september': 'September',
        'october': 'Oktober',
        'november': 'November',
        'december': 'December',
        'exercise-details': 'Övningsdetaljer',
        'show-exercise-title': 'Visa övningsnamn',
        'exercise-title': 'Övningsnamn:',
        'enable-prep-phase': 'Förberedelsefas',
        'prep-minutes': 'Minuter',
        'prep-seconds': 'Sekunder',
        'prep-message': 'Meddelande:',
        'pause-message': 'Pausmeddelande:',
        'enable-visual-signals': 'Visuella tidssignaler',
        'progress-display': 'Framstegsvisning:',
        'progress-none': 'Ingen',
        'progress-bar': 'Framstegsstapel',
        'progress-circle': 'Cirkeldiagram',
        'preview': 'Förhandsgranskning:',
        'download-offline': 'Ladda ned för offline-användning',
        'download-info': 'Laddar ned timer.zip för lokal användning utan internetanslutning',
        'theme-split-flap': 'Split-flap',
        'theme-led-segment': 'LED 7-segment',
        'display-size': 'Displaystorlek',
        'size-label': 'Storlek:',
        'size-small': 'Liten (25%)',
        'size-medium': 'Medium (50%)',
        'size-large': 'Stor (75%)',
        'size-max': 'Maximal (100%)',
        'flip-hours': 'Timmar',
        'flip-minutes': 'Minuter',
        'flip-seconds': 'Sekunder',
        'view-source': 'Se källkod på GitHub'
    },
    en: {
        'app-title': 'Timer & Clock',
        'timer': 'Timer',
        'clock': 'Clock',
        'timer-settings': 'Timer Settings',
        'tab-basic': 'Basic',
        'tab-clock': 'Clock Display',
        'tab-speed': 'Time Control',
        'tab-appearance': 'Appearance',
        'tab-exercise': 'Exercise Details',
        'tab-presets': 'Presets',
        'clock-settings': 'Clock Settings',
        'direction': 'Direction:',
        'countdown': 'Countdown',
        'countup': 'Count up',
        'hours': 'Hours',
        'minutes': 'Minutes',
        'seconds': 'Seconds',
        'clock-type': 'Type:',
        'real-time': 'Real time',
        'custom-time': 'Custom time',
        'format': 'Format:',
        'show-date': 'Show date',
        'show-weekday': 'Show weekday',
        'speed-settings': 'Speed Settings',
        'speed-05': 'Half speed',
        'speed-1': 'Normal',
        'speed-2': 'Double speed',
        'speed-5': '5x faster',
        'speed-10': '10x faster',
        'speed-60': 'One minute per second',
        'speed-affects-timer': 'Speed affects timer',
        'visual-theme': 'Visual Theme',
        'theme-digital': 'Digital Standard',
        'theme-analog': 'Analog Station',
        'theme-retro': '7-segment',
        'theme-tactical': 'Tactical',
        'theme-nixie': 'Nixie tubes',
        'theme-lcd': 'LCD',
        'presets': 'Presets',
        'save-preset': 'Save current',
        'load-preset': 'Load selected',
        'start-fullscreen': 'Start in fullscreen',
        'shortcuts': 'Shortcuts:',
        'pause-resume': 'Pause/Resume',
        'restart': 'Restart',
        'exit-fullscreen': 'Exit fullscreen',
        'monday': 'Monday',
        'tuesday': 'Tuesday',
        'wednesday': 'Wednesday',
        'thursday': 'Thursday',
        'friday': 'Friday',
        'saturday': 'Saturday',
        'sunday': 'Sunday',
        'january': 'January',
        'february': 'February',
        'march': 'March',
        'april': 'April',
        'may': 'May',
        'june': 'June',
        'july': 'July',
        'august': 'August',
        'september': 'September',
        'october': 'October',
        'november': 'November',
        'december': 'December',
        'exercise-details': 'Exercise Details',
        'show-exercise-title': 'Show exercise name',
        'exercise-title': 'Exercise name:',
        'enable-prep-phase': 'Preparation phase',
        'prep-minutes': 'Minutes',
        'prep-seconds': 'Seconds',
        'prep-message': 'Message:',
        'pause-message': 'Pause message:',
        'enable-visual-signals': 'Visual time signals',
        'progress-display': 'Progress display:',
        'progress-none': 'None',
        'progress-bar': 'Progress bar',
        'progress-circle': 'Circle chart',
        'preview': 'Preview:',
        'download-offline': 'Download for offline use',
        'download-info': 'Downloads timer.zip for local use without internet connection',
        'theme-split-flap': 'Split-flap',
        'theme-led-segment': 'LED 7-segment',
        'display-size': 'Display Size',
        'size-label': 'Size:',
        'size-small': 'Small (25%)',
        'size-medium': 'Medium (50%)',
        'size-large': 'Large (75%)',
        'size-max': 'Maximum (100%)',
        'flip-hours': 'Hours',
        'flip-minutes': 'Minutes',
        'flip-seconds': 'Seconds',
        'view-source': 'View source on GitHub'
    }
};

class I18n {
    constructor() {
        this.currentLang = localStorage.getItem('language') || 'sv';
        this.translations = translations;
    }

    setLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('language', lang);
        this.updateUI();
    }

    translate(key) {
        return this.translations[this.currentLang][key] || key;
    }

    updateUI() {
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            element.textContent = this.translate(key);
        });
    }

    getWeekday(dayIndex) {
        const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
        return this.translate(days[dayIndex]);
    }

    getMonth(monthIndex) {
        const months = ['january', 'february', 'march', 'april', 'may', 'june', 
                       'july', 'august', 'september', 'october', 'november', 'december'];
        return this.translate(months[monthIndex]);
    }
}

const i18n = new I18n();